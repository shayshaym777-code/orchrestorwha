# Dispatcher Configuration
PORT=4001
REDIS_URL=redis://127.0.0.1:6379

# Orchestrator Connection
ORCHESTRATOR_URL=http://localhost:3000
ORCHESTRATOR_API_KEY=your-api-key

# Send mode:
# - api: Dispatcher enqueues send commands via Orchestrator HTTP API (recommended for separate VPS)
# - redis: Dispatcher writes directly to Redis session:outbox:<sessionId>
SEND_MODE=api

# Queue Keys
# Gateway queue where jobIds arrive from the public Gateway service
GATEWAY_QUEUE_KEY=gateway:jobs
# Optional: keep a priority queue if you want internal urgent work (not used by Gateway)
PRIORITY_QUEUE_KEY=queue:priority

# Per-session queue prefix (each CONNECTED session has its own Redis list)
# Example key: queue:session:972501234567
SESSION_QUEUE_PREFIX=queue:session:

# Pacing / Anti-Ban Settings
# Default delay if trust policy can't be computed (fallback only)
DEFAULT_MIN_DELAY_MS=2000
DEFAULT_MAX_DELAY_MS=5000
BURST_LIMIT=5
BURST_COOLDOWN_MS=30000

# Processing
POLL_INTERVAL_MS=1000
MAX_CONCURRENT_JOBS=10

# Retry
MAX_RETRIES=3
RETRY_DELAY_MS=60000

# Auto-start on launch
AUTO_START=true

