# =====================================================
# WhatsApp Orchestrator - Environment Configuration
# =====================================================

# === Server ===
PORT=3000
NODE_ENV=development

# === API Security ===
API_KEY=change-me-api-key
WEBHOOK_SECRET=change-me-webhook-secret

# === Redis ===
REDIS_URL=redis://127.0.0.1:6379
# For Docker: REDIS_URL=redis://172.28.0.2:6379

# === Session Brain (optional) ===
# Python service that learns blocks/overload patterns and suggests blocking a proxy/ip
SESSION_BRAIN_URL=http://127.0.0.1:9000

# Apply Session Brain decisions automatically (block_ip => burn proxy + migrate sessions)
SESSION_BRAIN_ENFORCER_ENABLED=false
SESSION_BRAIN_ENFORCER_INTERVAL_MS=15000

# === Database ===
DB_PATH=./data/orchestrator.sqlite

# === Session Limits ===
MAX_SESSIONS_PER_PROXY=4
MAX_SESSIONS_PER_PHONE=4

# === Timing/Intervals ===
PROVISIONING_INTERVAL_MS=2000
MONITOR_INTERVAL_MS=30000
WATCHDOG_INTERVAL_MS=60000
PING_TIMEOUT_MS=180000

# === Inventory Thresholds ===
PROFILES_LOW_THRESHOLD=5
PROXIES_LOW_THRESHOLD=3

# =====================================================
# NEW: AI Integration (Gemini / ChatGPT)
# =====================================================
# Google Gemini API (for message generation, testing)
GEMINI_API_KEY=your-gemini-api-key-here

# OpenAI ChatGPT (optional alternative)
# OPENAI_API_KEY=your-openai-api-key-here

# =====================================================
# NEW: Telegram Alerts
# =====================================================
# Get bot token from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=your-bot-token-here

# Get chat ID by messaging @userinfobot or from group settings
TELEGRAM_CHAT_ID=your-chat-id-here

# Send Telegram alerts automatically when important incidents happen
TELEGRAM_INCIDENT_ALERTS_ENABLED=false
TELEGRAM_INCIDENT_POLL_INTERVAL_MS=5000

# Notify only about Job lifecycle: JOB_ACCEPTED / JOB_DONE (from Redis list: jobs:events)
TELEGRAM_JOB_ALERTS_ENABLED=false
TELEGRAM_JOB_POLL_INTERVAL_MS=5000

# =====================================================
# NEW: Backup Configuration
# =====================================================
SESSIONS_DIR=./sessions
BACKUPS_DIR=./backups
MAX_BACKUPS=7

# =====================================================
# NEW: Multiple Proxies (for docker-compose)
# =====================================================
# Format: socks5h://user:pass@host:port (חובה socks5h לאנטי-באן!)
# ה-h מבטיח DNS resolution דרך הפרוקסי (מונע דליפות DNS)
PROXY_URL_1=socks5h://user-xxxxx-ip-1.2.3.4:password@isp.decodo.com:10001
PROXY_URL_2=socks5h://user-xxxxx-ip-5.6.7.8:password@isp.decodo.com:10002
PROXY_URL_3=socks5h://user-xxxxx-ip-9.10.11.12:password@isp.decodo.com:10003
PROXY_URL_4=socks5h://user-xxxxx-ip-13.14.15.16:password@isp.decodo.com:10004
PROXY_URL_5=socks5h://user-xxxxx-ip-17.18.19.20:password@isp.decodo.com:10005

# =====================================================
# Worker Environment Variables (for docker-compose)
# =====================================================
# SESSION_ID=worker_1
# WEBHOOK_URL=http://172.28.0.3:3000/api/webhook
# PROXY_URL=${PROXY_URL_1}

# Keep-Alive Engine (Anti-Ban)
# ENABLE_KEEP_ALIVE=true
# PRESENCE_INTERVAL_MS=15000
# HIDDEN_MSG_INTERVAL_MS=600000
